# 《数据库基础》（精简版）

## 一.数据库基础

### 一.数据库的基本概念`P207`（以考*1）

数据库（Database，DB）是存储在计算机内，**有组织，可共享的数据集合**。数据库中的数据是按一定的数据模型组织，描述和存储的，具有**冗余度低，独立性高，易于扩充，修改方便和能够实现数据共享**的优点。

- 数据库管理系统

  是位于用户和操作系统之间的一层数据管理软件，是数据库的核心技术。主要功能包括：**数据定义，数据操纵，数据库的控制和数据库的维护**。常用的有：`Access`，`SQLite`，`MySQL`，`SQLServer`

- 数据库系统

  通常是指带有数据库的计算机系统。

### 二.数据库系统的特征`P208`

1. 数据结构化
2. 数据的共享性高
3. 数据独立性高
4. 数据由DBMS统一管理和控制

### 三.数据模型（以考*2）

##### 一.关系数据库系统`P209`

关系型数据库采用**二维表**作为基本数据结构，通过公共关键字段实现不同二维表之间的联系。每张数据表一般只存储事物某一方面的信息。关系型数据库**结构简单，数据独立性强**

| 市场上的主要关系型数据库 | 描述                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `SQLite`                 | 是一款**轻量级的嵌入**式关系型数据库，**无需配置，体积小，速度快，零配置，跨平台** |
| `SQL Server`             | 是**微软公司推**出的关系型数据库管理系统，**使用方便，可伸缩性好** |
| `Oracle`                 | 是**甲骨文公司**的一款大型专业关系型数据库管理系统，适用于大型企业，政府部门等需要**大批量处理数据的单位** |
| `MySQL`                  | 是一个**小型关系数据库管理系统**，开源属于甲骨文公司。**体积小，速度快，总体拥有成本低** |

##### 二.非关系数据库系统`P210`

​	非关系型数据库也被称为`NoSQL（Not only SQL）`数据库。**适合追求速度和可扩展性，业务多变的应用场景**

​	**扩展能力很强，数据的获取效率很高**。目前`NoSQL`数据库仍然没有一个统一的标准：

| 分类方式                  | 典型软件            | 优缺点                                                       |
| ------------------------- | ------------------- | ------------------------------------------------------------ |
| 键值对存储（`key-value`） | `Redis`             | 优点：能够进行数据的快速查询<br>缺点：需要存储数据之间的关系 |
| 列存储                    | `Hbase`             | 优点：能快速查询数据，数据扩展性强<br>缺点：数据库的功能较局限 |
| 文档数据库存储            | `MongoDB`           | 优点：对数据结构要求不严格<br>缺点：查询性能较差，缺少统一查询语言 |
| 图形数据库存储            | `InfoGrid`和`Neo4J` | 优点：方便利用图结构相关算法进行计算<br>缺点：想要结果必须进行整个图的计算，不到不适合的时候会很难使用 |

### 四.数据表及其结构`P210`（以考*8）

数据库的设计是实际应用的关键环节，首先确定数据库所要完成的任务，需要从数据库中得到什么样的信息；再确认数据库中应包含哪些数据表，每个表中包含哪些字段；最后确认每个字段的数据类型和字段长度。**数据表是数据库的重要组成部分之一**，是实际存放数据的地方，当建立数据库之后，接着就要建立数据表。

**数据表的设计是数据库设计的一大难点。**优秀的数据表结构清晰，便于后期数据查询；而不良的数据表会给后期的程序开发造成很多后患。在数据表的设计过程中应遵循以下规则：

1. 每张数据表中**不应该包含重复的数据**

   设计数据表时应保证每条信息只能出现在一个表中。避免各个表中含有相同的信息否则容易造成数据的冗余，和不一致不利于数据的更新。**除表之公共关键字段除外**

2. 每张表中只包含一个主体信息

   数据表的结构主要是由**字段和记录**两个概念组成的。

   - 字段：**数据表中的数据项称为字段**，字段表示物体某一方面的性质
   - 字段名：**就是字段的名称**，一般可以包含英文字母和数字，有些数据库也**支持汉字作为字段名**

   不同的数据库管理系统支持的数据类型有所区别，一般都支持：字符型，数值型，日期型，逻辑型

| 数据类型   | 描述                                                       | 举例                 |
| ---------- | ---------------------------------------------------------- | -------------------- |
| 字符型字段 | 一般存放字符型数据                                         | 姓名，地址等         |
| 数值型字段 | 用于存放数值型数据，其中存放的数据**一般是用于数值运算的** | 工资，成绩，身高     |
| 日期型字段 | 用于存放年月日等日期信息，部分数据库还可以存放时间信息     | 出生日期，销售日期等 |
| 逻辑型字段 | 用于存放只有两种结果的数据信息                             | `True`，`False`      |

## 二.`SQL`语言`P215`

中文名：**结构化查询语言**

英文名：`Structured Query Language`

作用：进行数据的**查找，添加，修改，删除**

### 一.结构化查询语言`SQLP220`（以考*1）

`SQL`语言结构简洁，功能强大，简单易学，所以自推出以来的到了广泛的应用。`Oracle，SQL Server，SQLite，Access`等都支持`SQL`语言作为数据库操作语言

##### 一.`SQL`主要优势

1. **是一个非过程化的语言**，`SQL`用户只需输入一条命令数据库就会显示结果，在`SQL`操作中**没有判断语句没有循环语句**
2. **`SQL`命令简洁易学**，通过`SQL`操作数据库只需要掌握少量核心命令即可。
3. `SQL`有极广的应用场合，由于主流的关系型数据库管理系统都支持`SQL`语言，**用`SQL`编写的语句都是可以移植的**

##### 二.`SQL`语言主要包含以下四类语句

| 描述         | 对应的代码             |
| ------------ | ---------------------- |
| 数据查询语句 | SELECT                 |
| 数据操纵语句 | INSERT，UPDATE，DELETE |
| 数据定义语句 | CREATE，ALTER，DROP    |
| 数据控制语句 | COMMIT，ROLLBACK       |

### 二.创建数据库数据表`P220`（以考*4）

数据库的创建是数据管理的基础而数据表是数据库的重要组成部分，数据库及数据表的创建**均由CREATE语句完成**

```sql
数据库创建基本格式：CREATE database 数据库名
```

部分数据库管理系统能直接创建中文数据库名，**但部分数据库管理系统必须先设置字符集**建议创建数据库时尽量用英文数据库名

```sql
数据表创建基本语法格式：CREATE table 数据表名 (字段一 字段类型[NOT NULL][PRIMARY KEY], 字段二 字段类型[NOT NULL][PRIMARY KEY], ...)
```

- NOT NULL：表示该字段不能为空
- PRIMARY KEY：表示该字段为主键用于确保**数据的唯一性**。主键的选择需谨慎通常基于业务逻辑和数据特性

| 常见的数据库字段类型 | 描述                                                         |
| :------------------: | ------------------------------------------------------------ |
|         NULL         | 值是空值                                                     |
|       INTEGER        | 值是一个带符号的整数                                         |
|         REAL         | 值是一个浮点值，存储为八字节的浮点数                         |
|         TEXT         | 值是一个文本字符串，使用数据库编码（`UTF-8`）                |
|         BLOB         | 值是一个二进制大对象，常用于存储图像音频，视频，文档等多媒体内容 |

### 三.基本查询

##### 一.SELECT的完整格式`P221`（以考*5）

数据库建立完成后查询数据是`SQL`语言中最重要的应用之一

```sql
SELECT的完整格式如下
SELECT 字段名,...... | *
[FROM 数据表名称]
[WHERE 条件表达式]
[ORDER BY 字段名[ASC | DESC],....]
```

##### 二.条件子句`P222`（必考）

当需要显示部分记录时，需要添加条件可以通过WHERE条件子句来实现条件查询。

条件子句是指用关系运算符，或逻辑运算符组成的表达式。

`SQL`支持六种关系运算符：

- 大于号（>）
- 小于号（<）
- 大于等于（>=）
- 小于等于（<=）

关系运算符可用于比较**数值型，字符型，日期型**三种类型的数据。

- LIKE运算符用于字符的匹配比较，**通常与两个通配符一起使用**：`%`代表任意个任意字符，`_`代表一个任意字符

  ```sql
  LIKE 常用方法如下
  字段名 LIKE “A%” 用于匹配A开头的任意长度的字符串
  字段名 LIKE “A_” 用于匹配A开头的后接一个任意字符的字符串
  字段名 LIKE “%A%” 用于匹配含有A的字符串
  ```

- `SQL`中的逻辑运算符与Python中的逻辑运算类似

  | 逻辑运算符 | 描述                                       |
  | ---------- | ------------------------------------------ |
  | and        | 当条件同时成立时，值为真                   |
  | or         | 当条件有一个成立时，值为真                 |
  | not        | 当条件成立时，值为假；条件不成立时，值为真 |

##### 三.ORDER BY子句`P222`（以考*1）

把输出结果按照字段名排序：`ASC`表示递增排序（默认），`DESC`表示递减排序

```sql 
格式：ORDER BY 字段名1[ASC | DESC],字段名2[ASC | DESC],....
```

##### 四.聚集函数`P222`

SELECT语句可以通过聚集对指定的字段进行统计计数等运算

| 函数名    | 函数功能               |
| --------- | ---------------------- |
| COUNT（） | 统计所选数据的行数     |
| SUM（）   | 计算数据列的和         |
| MIN（）   | 计算数据列中的最小值   |
| MAX（）   | 计算数据列中的最大值   |
| AVG（）   | 计算数据列中的平均值 |

##### 五.数据操作`P223`

1. 添加记录（以考3）

   使用INSERT语句可以将记录插入到数据表的最后面

   ```sql
   格式：INSERT INTO 数据表名 (字段名1，字段名2，...) VALUES (值1，值2,....)
   ```

   功能：在数据表的最后添加一条记录，字段的**值由VALUES指定**。若`INSERT`语句中未指定，**则值为空**

2. 编辑记录（以考*3）

   数据表中记录更新的**语句是UPDATE**

   ```SQL
   格式：UPDATE 数据表名 SET 字段名1 = 新值, 字段名2 = 新值, WHERE 条件;
   ```

   功能：对数据表中满足条件的记录更新字段的值

3. 删除记录（以考*2）

   数据表中删除记录的**语句是DELETE**

   ```SQL
   格式：DELETE FROM 数据表名 WHERE 条件; 
   ```

   功能：把数据表中满足条件的记录删除

   

